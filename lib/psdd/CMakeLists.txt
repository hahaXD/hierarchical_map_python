cmake_minimum_required(VERSION 3.9)
project(psdd)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_C_STANDARD 99)
include_directories(src lib/googletest/googletest/include lib/googletest/googlemock/include lib/libsdd/ lib/json/include/nlohmann lib/json/include)
add_subdirectory(lib/googletest)
add_subdirectory(lib/libsdd)
add_subdirectory(lib/json)

file(GLOB PSDD_TEST_SRC_FILES "test/*.cpp")
file(GLOB LIB_PSDD_SRC_FILES "src/*.h" "src/*.cpp" "src/*.c")
add_executable(psdd_test ${PSDD_TEST_SRC_FILES})
add_library(psdd ${LIB_PSDD_SRC_FILES} )
add_executable(psdd_inference src/psdd_inference_main.cpp)
target_link_libraries(psdd_test psdd  gtest gtest_main psdd sdd nlohmann_json gmp)
target_link_libraries(psdd sdd nlohmann_json gmp)
target_link_libraries(psdd_inference psdd sdd nlohmann_json gmp)
